# Copyright (c) 2019, Arm Limited and Contributors. All rights reserved.
#
# SPDX-License-Identifier: BSD-3-Clause

metadata:
    format: Lava-Test Test Definition 1.0
    name: Install Docker into LXC Container
    description: Install Docker into LXC Container

run:
    steps:
        # These steps come from https://docs.docker.com/install/linux/docker-ce/ubuntu/ but
        # are run as root so the sudo have all been removed.
        - apt-get update
        - apt-get install -q -q --yes apt-transport-https ca-certificates curl gnupg-agent software-properties-common
        - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -
        - apt-key fingerprint 0EBFCD88
        - add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
        - apt-get update
        - apt-get install -q -q --yes docker-ce docker-ce-cli containerd.io
        - apt-get install -q -q apt-utils
        - addgroup ubuntu docker
